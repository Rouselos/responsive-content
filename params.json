{"tagline":"Deliver different content to different devices. A jQuery plugin.","note":"Don't delete this file! It's used internally to help with page regeneration.","body":"# Responsive Content\r\n\r\nA jQuery plugin that helps you serve different content to different devices. \r\n\r\nResponsive Content is used to load content that is appropriate to the current device's screen size. It is typically used alongside Responsive Design techniques.\r\nNote however that Responsive *Design* and Responsive *Content* act on different levels:\r\ngiven a particular screen width, the former applies a particular styling to the *same* content - whereas the latter actually loads _different_ content. \r\nIt can be used subtly - for example to cause smaller images to be loaded on smaller devices - or to deliver radically different content to different screen widths \r\nor device capabilities. \r\n\r\n### How it works\r\n\r\nResponsive Content is a coarse-grained content loader, designed to pull an entire block of HTML into the \"content\" area of a page. \r\nThe idea is to have \"header\" and \"footer\" HTML areas that are common across all devices (styled appropriately using CSS media queries), and to \r\ndynamically replace the \"content\" area of the page with HTML tailored to the requesting-device's width or capabilities. \r\n\r\nThe content is loaded as a single HTML fragment using Ajax and inserted into a specified container element. \r\nEach fragment request reports the screen width and other device capability information,\r\nallowing the server to tailor the HTML fragment in its response. How the server does that is dependent on the particular site requirements, server-side languages etc., \r\nand is outside the scope of this jQuery plugin. \r\n\r\nAs narrow screen widths are generally associated with lower bandwidth connections, we take a \"progressive enhancement\" or \"mobile first\" approach: \r\nthe content area is expected to be pre-populated with the narrow/mobile version of the page content; an Ajax reload is only triggered if the \r\nscreen width exceeds a specified breakpoint.\r\n\r\nClicks on page links trigger the same Ajax mechanism, causing new width-tailored content to be loaded into the page. \r\nThus for a user's journey through the site, the header and footer areas are loaded only once\r\nat the point of entry, resulting in potential performance increases. The [Pjax](https://github.com/defunkt/jquery-pjax)\r\ntechnique is used to ensure that the URL history and address-bar state is correctly maintained throughout.\r\n\r\n### Design Criteria\r\n\r\nThe approach meets these critical criteria:\r\n\r\n* **Single URLs** : a webpage should have an identical URL whatever device it is viewed on (though the page's components may have device-contingent URLs.)\r\n\r\n* **Cache Friendliness** : since baseline cacheing arrangements use the URL of a document as its unique key, there should be no reliance on any other parameters; the approach must thus avoid User Agent detection or cookies. \r\n\r\n* **Performance Orientation** : devices with lower bandwidths should be the beneficiaries of all performance trade offs inherent in the approach. \r\n\r\n### Client Side\r\n\r\nLoad the file `jquery.responsive-content.js` in a &lt;script&gt; tag, then call the `responsiveContent()` function on a jQuery selector wrapper that returns the (single) content-container element:\r\n\r\n```javascript\r\n$('#myContainer').responsiveContent({\r\n\t// options\r\n})\r\n```\r\nThe available options are all optional:\r\n\r\n* `breakpoint` : if the screen width is greater than or equal to this value, an Ajax reload is triggered. Default is 768.\r\n\r\n* `emulator` : reload the fragment when the browser window is resized. Switches the metric to window width, rather than screen width. Default is _false_.\r\n\r\n* `linkSelector` : the jQuery selector for elements to Pjax-ify. Must only select anchor tags. The default is _'a'_.\r\n\r\n* `capabilities` : an object containing whatever other capabilities that you might need to pass to the server (screen width is always passed). The default is _{}_.\r\n\r\n* `afterLoad(isInitial)` : a callback function to run secondary logic after each load. This function is called exactly once for each of these exclusive cases: \r\n(1) the initial page requires no Ajax reload because the screen width is smaller than _breakpoint_; \r\n(2) the initial page makes an Ajax reload because screen width is at least _breakpoint_;\r\n(3) a subsequent click causes a Pjax load; \r\n(4) a page is resized (and you've set _emulator: true_). Default is an empty function.\r\nThe function has a single boolean argument isInitial, which is true in cases (1) and (2). \r\n\r\nFor example: \r\n\r\n```javascript\r\n$('#myContainer').responsiveContent({\r\n\r\n\t// Switch on the emulator if the url hash is #emulator\r\n\temulator: /^#emulator$/.test(window.location.hash),\r\n\r\n\t// Tell the server about the device's touch capability and whether it's a retina screen\r\n\tcapabilities: {\r\n\t\ttouch: 'ontouchstart' in document.documentElement,\r\n\t\tpixelratio: window.devicePixelRatio && window.devicePixelRatio > 1 ? window.devicePixelRatio : 1\r\n\t},\r\n\r\n\t// ping Google Analytics after each \"page\"\r\n\tafterLoad: function(){ \r\n\t\tif ( '_gaq' in window ) {\r\n\t\t\t_gaq.push(['_trackPageview'])\r\n\t\t}\r\n\t}\r\n\r\n})\r\n```\r\n### Server Side\r\n\r\nThe query parameters passed by each Ajax GET request are:\r\n\r\n* `_rescon` : indicates that an HTML fragment should be served.\r\n\r\n* `_rescon_reload` : equals 1 when the request is a reload caused by screen width exceeding _breakpoint_ \r\n(or if _emulator: true_ and a browser window resize has caused a reload).\r\n\r\n* `_rescon_width` : the screen width (or the window width when _emulator: true_). \r\n\r\n* `_rescon_{capability name}` : the value of the capability. (In the above example, you might receive *_rescon_touch:true* and *_rescon_pixelratio:2* from an iPhone.) \r\n\r\nIf the *_rescon* query parameter is present in a request, the server should render a fragment that\r\nomits all surrounding HTML, especially the &lt;script&gt; tag that contains or externally loads the `$('#myContainer').responsiveContent()` function call. \r\nThis is important in order to prevent perpetual request loops.\r\n\r\nThe server should use the width and capability parameters to conditionally alter the HTML fragment that it returns. \r\nExactly what this entails is implementation specific and beyond the scope of this jQuery plugin. \r\n\r\nThe server should ensure also that the above __rescon*_ query parameters do not leak through and reappear in anchor \r\nhref attributes in the returned HTML fragment. \r\n\r\nHere is a [very basic PHP example](https://github.com/stephanfowler/responsive-content/blob/master/server-side-example.php) of the server side logic.\r\n\r\n### Click Behaviour\r\n\r\nClicks on links selected by `linkSelector` will cause new fragments to be requested and loaded into the \r\ncontainer element using Pjax. This causes the address bar and\r\nhistory state to be updated with the link's href URL, ensuring correct back/forward button behaviour. Pjax also \r\ncaches DOM fragments so that post-Ajax page state is maintained when navigating the history. \r\n\r\nNOTE: this only applies to <a href=\"http://caniuse.com/#feat=history\">browsers that support the HTML5 History API</a>. IE9 does not, for example. \r\nIn this case the fallback behaviour is to always load the entire page as normal including its default content, \r\nfollowed by device-tailored content via Ajax if the screen width exceeds the _breakpoint_ option value.\r\n\r\n### Performance Considerations\r\n\r\nThe impact on performance depends on the device's screen width, its browser's support for HTML5 History API, and whether \r\nwe are considering an \"entry\" page or a \"post-click\" page. (An entry page is just the first page that a particular user visits on the site. \r\nIt is not necessarily the home page; for instance the user may click a link on another site to a specific article on this site.)\r\n\r\nCompared to a \"same HTML for all devices approach\", and assuming Responsive Content is being used load \"lighter\" content volumes into smaller devices,\r\nthe potential performance impacts can be summarised across four classes of device:\r\n\r\n* screen width less than *breakpoint*, History support \r\n(iPhones, Android phones) : \r\nperformance increase on entry pages and an even greater increase on post-click pages.\r\n\r\n* screen width less than *breakpoint*, no History support \r\n(older phones) : \r\nperformamce increase on both page types.\r\n\r\n* screen width at least *breakpoint*, History support \r\n(tablets, desktops running Chrome/Firefox/Safari/IE10) : \r\nperformance decrease on entry pages and a performance increase on \"post click\" pages.\r\n\r\n* screen width at least *breakpoint*, no History support \r\n(desktops running IE7/8/9) : \r\nperformance decrease on both page types. \r\n\r\nWith the inevitability that the last device class will diminish and the first will likely grow, the tendency is for an overall performance increase - \r\nwith the exception of entry pages on larger devices. Given that the latter typically have the higher bandwidth connections, \r\nthe 'Performance Orientation' design criterion is fulfilled.\r\n\r\n### Cache Considerations\r\n\r\nThe approach is cache-friendly. Firstly, URLs for full pages are the same across all devices since the initial page state is the same for all devices, \r\nbeing progressively enhanced only if the device's screen width merits it. Secondly, all Ajax requests use the GET method with URLs\r\nthat - along with their query parameters - are fully deterministic. The URLs in both cases are thus effective as regular cache keys since they are not reliant for their\r\nuniqueness on other HTTP request headers such as User Agent or Cookie.\r\n\r\n### Degradation\r\n\r\nThe page degrades to the mobile content when Javascript is turned off. With the appropriate use of CSS Responsive Design, this may hopefully be rendered acceptably. \r\n\r\n### Device Emulator\r\n\r\nIf you set _emulator: true_ and resize the browser window, Ajax calls will be made and the content will \r\nbe reloaded according to the current _window_ width, rather than the device's screen width. This is useful in development for viewing \r\nthe resulting content variants, but should be used with caution on production sites.\r\nThe reloads are throttled to maximum of one per second as you drag the browser window edge.\r\n\r\n### Example Sites\r\n\r\n[The Chap Magazine](http://thechapmagazine.co.uk/). The number of articles on the front page decreases on lower screen sizes, as does the actual size of \r\nimages in articles. Try it in <a href=\"http://thechapmagazine.co.uk/#emulator\">emulator mode</a>.\r\n\r\n[Metro Blogs](http://blogs.metro.co.uk/) uses an evolution of Responsive Content, which adds a \"swipable\" content area. This library will be published separately on Github in due course.\r\n\r\n***\r\nResponsive Content is a fork of [Pjax](https://github.com/defunkt/jquery-pjax).\r\n\r\nCited at:\r\n[thenextweb.com](http://thenextweb.com/dd/2012/10/28/responsive-content-this-jquery-plugin-lets-you-easily-serve-different-html-to-different-devices/)\r\n","name":"Responsive-content","google":""}